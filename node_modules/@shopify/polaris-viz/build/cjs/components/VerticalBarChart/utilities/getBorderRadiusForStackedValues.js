'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var polarisVizCore = require('@shopify/polaris-viz-core');

function getBorderRadiusForStackedValues(values, groupIndex) {
  const highestIndex = getIndex(values, value => value > 0);
  const lowestIndex = getIndex(values, value => value < 0);

  if (groupIndex === highestIndex) {
    return polarisVizCore.BORDER_RADIUS.Top;
  }

  if (groupIndex === lowestIndex) {
    return polarisVizCore.BORDER_RADIUS.Bottom;
  }

  return polarisVizCore.BORDER_RADIUS.None;
}

function getIndex(values, checkFn) {
  let prevIndex = -1;
  const value = values.reduce((prev, cur, curIndex) => {
    if (curIndex > prevIndex && checkFn(cur)) {
      prevIndex = curIndex;
      return cur;
    }

    prevIndex = curIndex;
    return prev;
  }, -1);
  return values.lastIndexOf(value);
}

exports.getBorderRadiusForStackedValues = getBorderRadiusForStackedValues;
