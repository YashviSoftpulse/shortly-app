'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var polarisVizCore = require('@shopify/polaris-viz-core');
var formatAndAddEllipsis = require('./formatAndAddEllipsis.js');

function truncateSingleLine({
  characterWidths,
  label,
  targetWidth
}) {
  const estimatedWidth = polarisVizCore.estimateStringWidth(label, characterWidths);

  if (estimatedWidth <= targetWidth) {
    return label;
  }

  const characters = label.split('');
  let width = 0;
  let newLabel = '';
  let index = 0;

  while (width <= targetWidth - characterWidths[polarisVizCore.ELLIPSIS]) {
    width += characterWidths[characters[index]];
    newLabel += characters[index];
    index++;
  }

  return formatAndAddEllipsis.formatAndAddEllipsis(newLabel);
}

exports.truncateSingleLine = truncateSingleLine;
