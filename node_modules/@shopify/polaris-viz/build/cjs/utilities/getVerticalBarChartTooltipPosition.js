'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var eventPoint = require('./eventPoint.js');
var constants = require('../components/TooltipWrapper/constants.js');

function getVerticalBarChartTooltipPosition({
  chartXPosition,
  formatPositionForTooltip,
  maxIndex,
  step,
  tooltipPosition,
  yMax,
  yMin
}) {
  const {
    event,
    index,
    eventType
  } = tooltipPosition;

  if (eventType === 'mouse' && event) {
    const point = eventPoint.eventPointNative(event);

    if (point == null) {
      return constants.TOOLTIP_POSITION_DEFAULT_RETURN;
    }

    const {
      svgX,
      svgY
    } = point;
    const currentPoint = svgX - chartXPosition;
    const activeIndex = Math.floor(currentPoint / step);

    if (activeIndex < 0 || activeIndex > maxIndex || svgY <= yMin || svgY > yMax) {
      return constants.TOOLTIP_POSITION_DEFAULT_RETURN;
    }

    return formatPositionForTooltip(activeIndex);
  } else if (index != null) {
    return formatPositionForTooltip(index);
  }

  return constants.TOOLTIP_POSITION_DEFAULT_RETURN;
}

exports.getVerticalBarChartTooltipPosition = getVerticalBarChartTooltipPosition;
