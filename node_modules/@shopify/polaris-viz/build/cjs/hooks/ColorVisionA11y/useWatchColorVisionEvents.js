'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var React = require('react');
var polarisVizCore = require('@shopify/polaris-viz-core');
var utilities = require('./utilities.js');
var useCallbackRef = require('../useCallbackRef.js');

function useWatchColorVisionEvents({
  type,
  onIndexChange
}) {
  const onIndexChangeCallback = useCallbackRef.useCallbackRef(onIndexChange);
  const {
    id
  } = polarisVizCore.useChartContext();
  React.useEffect(() => {
    if (!id) {
      return;
    }

    const eventName = utilities.getEventName(id, type);
    window.addEventListener(eventName, onIndexChangeCallback);
    return () => {
      window.removeEventListener(eventName, onIndexChangeCallback);
    };
  }, [id, type, onIndexChangeCallback]);
}

exports.useWatchColorVisionEvents = useWatchColorVisionEvents;
