'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var React = require('react');
var resizeObserver$1 = require('@juggle/resize-observer');

const defaultEntry = process.env.NODE_ENV === 'test' ? {
  contentRect: {
    width: 500,
    height: 500
  }
} : null;

function resizeObserver(callback) {
  if (typeof window === 'undefined') {
    return resizeObserver$1.ResizeObserver;
  }

  return new (window.ResizeObserver || resizeObserver$1.ResizeObserver)(callback);
}

const useResizeObserver = () => {
  const [ref, setRef] = React.useState(null);
  const [entry, setEntry] = React.useState(defaultEntry);
  React.useLayoutEffect(() => {
    if (!ref) {
      return;
    }

    const observer = resizeObserver(([entry]) => setEntry(entry));
    observer.observe(ref);
    return () => {
      observer.disconnect();
    };
  }, [ref, setEntry]);
  return {
    ref,
    setRef,
    entry
  };
};

exports.useResizeObserver = useResizeObserver;
