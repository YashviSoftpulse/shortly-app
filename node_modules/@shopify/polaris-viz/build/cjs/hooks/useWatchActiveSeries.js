'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var polarisVizCore = require('@shopify/polaris-viz-core');
var React = require('react');
var useCallbackRef = require('./useCallbackRef.js');
var utilities = require('./ColorVisionA11y/utilities.js');

function useWatchActiveSeries(id, onIndexChange) {
  const onIndexChangeCallback = useCallbackRef.useCallbackRef(onIndexChange);
  React.useEffect(() => {
    const clearActiveSeriesListener = setActiveSeriesListener(id, onIndexChangeCallback);
    return () => clearActiveSeriesListener();
  }, [id, onIndexChangeCallback]);
}
function setActiveSeriesListener(id, onIndexChange) {
  const eventName = utilities.getEventName(id, polarisVizCore.COLOR_VISION_SINGLE_ITEM);
  window.addEventListener(eventName, onIndexChange);
  return () => {
    window.removeEventListener(eventName, onIndexChange);
  };
}

exports.setActiveSeriesListener = setActiveSeriesListener;
exports.useWatchActiveSeries = useWatchActiveSeries;
