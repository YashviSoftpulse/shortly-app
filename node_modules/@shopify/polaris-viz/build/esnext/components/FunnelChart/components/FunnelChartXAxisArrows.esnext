import { jsx } from 'react/jsx-runtime';
import { useLabels } from '../../Labels/hooks/useLabels.esnext';
import { TextLine } from '../../TextLine/TextLine.esnext';

const ARROW_WIDTH = 11;
const ARROW_HEIGHT = 9;
function FunnelChartXAxisArrows({
  onHeightChange,
  x,
  index,
  chartX,
  chartY,
  labelWidth
}) {
  var _firstLabel$transform;

  const {
    lines
  } = useLabels({
    allowLineWrap: true,
    labels: ['â†’'],
    targetWidth: labelWidth,
    onHeightChange
  });
  const firstLine = lines[0];
  const firstLabel = firstLine[0];
  const areLabelsVertical = (_firstLabel$transform = firstLabel.transform) === null || _firstLabel$transform === void 0 ? void 0 : _firstLabel$transform.includes('rotate(-90)');

  const getArrowTransform = () => {
    if (areLabelsVertical) {
      return `translate(${chartX + x - labelWidth / 2 + ARROW_WIDTH / 2},${chartY + ARROW_HEIGHT})`;
    }

    return `translate(${chartX - labelWidth / 1.5 + x},${chartY})`;
  };

  const arrowLine = [{ ...firstLabel,
    transform: undefined
  }];
  return /*#__PURE__*/jsx("g", {
    transform: getArrowTransform(),
    children: /*#__PURE__*/jsx(TextLine, {
      line: arrowLine,
      index: index
    })
  }, `${index}-arrow`);
}

export { FunnelChartXAxisArrows };
