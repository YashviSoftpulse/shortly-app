import { useMemo } from 'react';
import { pushGapToArray } from '../../../../utilities/pushGapToArray.esnext';
import { STACKED_BAR_GAP } from '@shopify/polaris-viz-core';

function useStackedGaps({
  stackedValues,
  groupIndex
}) {
  return useMemo(() => {
    const gaps = {
      positive: [],
      negative: []
    };
    stackedValues[groupIndex].forEach(([start, end], index) => {
      if (end > 0) {
        pushGapToArray({
          gaps,
          index,
          direction: 'positive',
          firstGapValue: 0
        });
      }

      if (start < 0) {
        pushGapToArray({
          gaps,
          index,
          direction: 'negative',
          firstGapValue: STACKED_BAR_GAP
        });
      }
    });
    return gaps;
  }, [groupIndex, stackedValues]);
}

export { useStackedGaps };
