import { useMemo } from 'react';
import { sortBarChartData } from '../../../utilities/sortBarChartData.esnext';
import { useXScale } from './useXScale.esnext';

function useVerticalBarChart({
  data,
  drawableWidth,
  labels
}) {
  const sortedData = sortBarChartData(labels, data);
  const areAllNegative = useMemo(() => {
    return ![...sortedData].reduce((prev, cur) => prev.concat(cur), []) // If one value is greater than zero,
    // bail out of the loop
    .some(num => num !== null && num > 0);
  }, [sortedData]);
  const {
    xScale,
    gapWidth
  } = useXScale({
    drawableWidth,
    data: sortedData,
    labels
  });
  return {
    sortedData,
    areAllNegative,
    xScale,
    gapWidth
  };
}

export { useVerticalBarChart };
